<!--
Copyright (c) Microsoft Corporation.
Licensed under the MIT license.
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/newcampaign.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/restyle.css') }}">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <title>NosPerramus</title>
</head>

<body>
    <!-- Image and text -->
    <nav class="navbar navbar-dark bg-dark">
        <a class="navbar-brand" href="#">
            <img src="{{ url_for('static', filename='img/NosPerramusLogo.svg') }}" width="40" height="40" class="d-inline-block align-top" alt="" loading="lazy">
            NosPerramus
        </a>
        <form action="/" method="get">
            <button type="submit" class="btn btn-lg btn-primary btn-block">Salir</button>
        </form>
    </nav>
    <main role="main" class="container" style='padding-top: 20px;'>
            <ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
            <li class="nav-item" role="presentation">
              <a class="nav-link active" id="pills-home-tab" data-toggle="pill" href="#pills-home" role="tab" aria-controls="pills-home" aria-selected="true">Crear Campaña</a>
            </li>
            <li class="nav-item" role="presentation">
              <a class="nav-link" id="pills-profile-tab" data-toggle="pill" href="#pills-profile" role="tab" aria-controls="pills-profile" aria-selected="false">Subir archivos</a>
            </li>
          </ul>
          
          <div class="tab-content" id="pills-tabContent">
            <div class="tab-pane fade show active" id="pills-home" role="tabpanel" aria-labelledby="pills-home-tab">
                <form>
                    <div class="form-group">
                        <label for="campaign-name"><b>Nombre de campaña</b></label>
                        <input type="text" class="form-control" id="campaign-name" name="campaign-name" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="date-from"><b>Fecha desde</b></label>
                            <input type="date" class="form-control" id="date-from" name="date-from">
                        </div>
                        <div class="form-group col-md-6">
                            <label for="date-to"><b>Fecha hasta</b></label>
                            <input type="date" class="form-control" id="date-to" name="date-to">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-12">
                            <a data-toggle="collapse" class="collapsed" data-target="#collapseColor" aria-expanded="true" role="button" aria-controls="collapseColor"><b>Color</b></a>
                            <div class="card collapse show" id="collapseColor">
                                <div class="card-body row">
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" name="select-all-colors" id="select-all-colors"  type="checkbox"  value="" >
                                            <label class="form-check-label" for="color-checkbox">Seleccionar todos los colores</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Aero melange</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color"  type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Azul Francia</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Beige</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input"  name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Camel fuerte</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input"  name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Cemento</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Cereza</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Estampa</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Fantasia gris</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input"  name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Fantasia micro</label>
                                        </div>

                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Gris</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Gris claro</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Gris melange</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Ladrillo</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Latte</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Marino</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Naranja</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Negro</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Negro jet</label>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Off white</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Rojo</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Rosa</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Tiza</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Topo</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Verde</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Verde seco</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Vision</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" name="color" type="checkbox" value="" id="color-checkbox">
                                            <label class="form-check-label" for="color-checkbox">Vision oscuro</label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-4">
                            <a data-toggle="collapse" href="#collapseArticulo" aria-expanded="true" aria-controls="collapseArticulo"><b>Articulo</b></a>
                            <div class="card collapse show" id="collapseArticulo">
                                <div class="card-body">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="" id="select-all-articles">
                                        <label class="form-check-label" for="lumley-checkbox">Selecionar todos los articulos</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name="articulo" type="checkbox" value="" id="lumley-checkbox">
                                        <label class="form-check-label" for="lumley-checkbox">Lumley</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name="articulo" type="checkbox" value="" id="vader17-checkbox">
                                        <label class="form-check-label" for="vader17-checkbox">Vader 17</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name="articulo" type="checkbox" value="" id="gappy-checkbox">
                                        <label class="form-check-label" for="gappy-checkbox">Gappy</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name="articulo" type="checkbox" value="" id="macbeth-checkbox">
                                        <label class="form-check-label" for="macbeth-checkbox">Macbeth</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name="articulo" type="checkbox" value="" id="fily-checkbox">
                                        <label class="form-check-label" for="fily-checkbox">Fily</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name="articulo" type="checkbox" value="" id="feet-checkbox">
                                        <label class="form-check-label" for="feet-checkbox">Feet</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <a data-toggle="collapse" href="#collapseTalle" aria-expanded="true" aria-controls="collapseTalle"><b>Talle</b></a>
                            <div class="card collapse show" id="collapseTalle">
                                <div class="card-body">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="" id="select-all-sizes">
                                        <label class="form-check-label" for="size-XXS-checkbox">Seleccionar todos los talles</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name=talle type="checkbox" value="" id="size-XXS-checkbox">
                                        <label class="form-check-label" for="size-XXS-checkbox">XXS</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name=talle type="checkbox" value="" id="size-XS-checkbox">
                                        <label class="form-check-label" for="size-XS-checkbox">XS</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name=talle type="checkbox" value="" id="size-S-checkbox">
                                        <label class="form-check-label" for="size-S-checkbox">S</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name=talle type="checkbox" value="" id="size-M-checkbox">
                                        <label class="form-check-label" for="size-M-checkbox">M</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name=talle type="checkbox" value="" id="size-L-checkbox">
                                        <label class="form-check-label" for="size-L-checkbox">L</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name=talle type="checkbox" value="" id="size-XL-checkbox">
                                        <label class="form-check-label" for="size-XL-checkbox">XL</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name=talle type="checkbox" value="" id="size-XXL-checkbox">
                                        <label class="form-check-label" for="size-XXL-checkbox">XXL</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name=talle type="checkbox" value="" id="size-XXXL-checkbox">
                                        <label class="form-check-label" for="size-XXXL-checkbox">XXXL</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group col-md-4">
                            <a data-toggle="collapse" href="#collapseSucursal" aria-expanded="true" aria-controls="collapseSucursal"><b>Sucursal</b></a>
                            <div class="card collapse show" id="collapseSucursal">
                                <div class="card-body">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="" id="select-all-shops">
                                        <label class="form-check-label" for="select-all-shops">Seleccionar todas las sucursales</label>
                                    </div>

                                    <div class="form-check">
                                        <input class="form-check-input" name="sucursal" type="checkbox" value="" id="sucursal-dot-checkbox">
                                        <label class="form-check-label" for="sucursal-dot-checkbox">Dot</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name="sucursal"  type="checkbox" value="" id="sucursal-alvear-checkbox">
                                        <label class="form-check-label"    for="sucursal-alvear-checkbox">Alvear</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name="sucursal"  type="checkbox" value="" id="sucursal-carilo-checkbox">
                                        <label class="form-check-label" for="sucursal-carilo-checkbox">Carilo</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name="sucursal"  type="checkbox" value="" id="sucursal-florida-checkbox">
                                        <label class="form-check-label" for="sucursal-alvear-checkbox">Florida</label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" name="sucursal"  type="checkbox" value="" id="sucursal-sarmiento-checkbox">
                                        <label class="form-check-label" for="sucursal-sarmiento-checkbox">Sarmiento</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
             
                    <button id="create-campaign" type="button" class="btn btn-primary btn-lg btn-block">Crear Campaña</button>
                    <div id="success-campaign-created" class="toast" style="position: absolute;bottom: 30px;right: 30px; background-color: #B4C424;" role="alert" aria-live="assertive" aria-atomic="true" data-autohide="false"> 
                        <div class="toast-header">
                          <img src="../static/img/tick.png" class="rounded mr-2" alt="..." style= "width:7%">
                          <strong id="campaignCreatedText" class="mr-auto">¡Campaña creada con éxito!</strong>
                          <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                          </button>
                      </div>
                      <div class="toast-body">
                          <i class="bi bi-check"></i>
                          La campaña fue almacenada de manera correcta
                        </div>
                    </div>

                    <div id="error-campaign-created" class="toast" style="position: absolute;bottom: 30px;right: 30px; background-color: #E97451;" role="alert" aria-live="assertive" aria-atomic="true" data-autohide="false"> 
                        <div class="toast-header">
                          <img src="../static/img/close.png" class="rounded mr-2" alt="..." style= "width:7%">
                          <strong id="error" class="mr-auto">ERROR</strong>
                          <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                          </button>
                      </div>
                      <div class="toast-body">
                          <i class="bi bi-check"></i>
                          <strong> Debe completar los campos para crear la campaña </strong>
                        </div>
                    </div>
                </form>              

            </div>
            <div class="tab-pane fade" id="pills-profile" role="tabpanel" aria-labelledby="pills-profile-tab">
                <!-- SUBIR ARCHIVO CON DATOS  -->
                <input type="file" id="campaign-data" style="padding-bottom: 50px"> 
            </div>
            <!--<div id="success-file-charged", class="alert alert-success hide" style="position: relative; display: none; margin-right: 30%; margin-left: 30%; width: 30%; top: 0px">
                <strong>Success!</strong> Archivo cargado correctamente.
            </div>-->

            <div id="success-file-charged" class="toast" style="position: absolute;bottom: 30px;right: 30px; background-color: #CAFFCF;" role="alert" aria-live="assertive" aria-atomic="true" data-autohide="false"> 
              <div class="toast-header">
                <img src="../static/img/tick.png" class="rounded mr-2" alt="..." style= "width:7%">
                <strong class="mr-auto">¡Archivo cargado con éxito!</strong>
                <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="toast-body">
                <i class="bi bi-check"></i>
                El archivo fue correctamente seleccionado y será procesado en segundo plano
              </div>
            </div>

        
        
        <br>
        <div class="alert alert-success alert-dismissible fade show" style="display: none" role="alert"><button type="button" class="close" data-dismiss="alert">×</button><b>EXITO: </b>La campaña se genero correctamente</div>
        <div class="alert alert-danger alert-dismissible fade show" style="display: none" role="alert"><button type="button" class="close" data-dismiss="alert">×</button><b>ERROR: </b>La campaña no se pudo generar</div>

        <div class="modal fade" id="loading-campaign" tabindex="-1" role="dialog" aria-labelledby="loading-campaign" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLongTitle">La campaña se generara de fondo</h5>                 
                </div>
                <div class="modal-body d-flex justify-content-center align-items-center">  
                    <div class="spinner-border text-success" role="status">
                        <span class="sr-only">Cargando...</span>
                    </div>
                </div>              
              </div>
            </div>
        </div>

        <div class="modal fade" id="loading-file" tabindex="-1" role="dialog" aria-labelledby="loading-campaign" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLongTitle">Subiendo archivo seleccionado</h5>                 
                </div>
                <div class="modal-body d-flex justify-content-center align-items-center">  
                    <div class="spinner-border text-primary" role="status">
                        <span class="sr-only">Cargando...</span>
                    </div>
                </div>              
              </div>
            </div>
        </div>        

    </main>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/powerbi-client/2.15.1/powerbi.min.js" integrity="sha512-OWIl8Xrlo8yQjWN5LcMz5SIgNnzcJqeelChqPMIeQGnEFJ4m1fWWn668AEXBrKlsuVbvDebTUJGLRCtRCCiFkg==" crossorigin="anonymous"></script>
    <script src="{{ url_for('static', filename='js/index.js') }}"></script>

    <script>
        $("#create-campaign").click(function(){
            $("#loading-campaign").modal('show');
            setTimeout(function(){
                $("#loading-campaign").modal('hide');
                if ($("#campaign-name").val() != '' && $("#date-from").val() != '' && $("#date-to").val() != ''){
                    $("#campaignCreatedText").text(`Campaña ${$("#campaign-name").val()} creada con éxito!`)
                    $("#success-campaign-created").toast('show');
                    setTimeout(function(){
                        $("#success-campaign-created").toast('hide');                             
                        window.location.href = '/newcampaign';
                    },2000)
                } else {
                    $("#error-campaign-created").toast('show');
                    setTimeout(function(){
                        $("#error-campaign-created").toast('hide');                             
                    },2000)
                }                  
            }, 3000);
        });

        $('#campaign-data').on("change", function(e){ 
            $("#loading-file").modal('show');
            setTimeout(function(){
                $("#loading-file").modal('hide');
                $("#success-file-charged").toast('show');
                setTimeout(function(){
                    $("#success-file-charged").toast('hide');
                    const file = e.target.files[0];
                    let req = new XMLHttpRequest();
                    let formData = new FormData();

                    formData.append("file", file);                                
                    // req.open("POST", '/upload/image');
                    // req.send(formData);
                },2000)                
            }, 3000);
            
        });
        $('#select-all-colors').click(function(event) {   
        if(this.checked) {
        
            $('input[name=color]').prop('checked', true);
        } else {
            $('input[name=color]').prop('checked', false);
        }});
        

        $('#select-all-articles').click(function(event) {   
        if(this.checked) {
        
            $('input[name=articulo]').prop('checked', true);
        } else {
            $('input[name=articulo]').prop('checked', false);
        }});

        $('#select-all-sizes').click(function(event) {   
        if(this.checked) {
        
            $('input[name=talle]').prop('checked', true);
        } else {
            $('input[name=talle]').prop('checked', false);
        }});  

        $('#select-all-shops').click(function(event) {   
        if(this.checked) {
        
            $('input[name=sucursal]').prop('checked', true);
        } else {
            $('input[name=sucursal]').prop('checked', false);
        }});  

    </script>


</body>
</html>